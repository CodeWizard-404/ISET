{"version":3,"file":"soap.js","names":["Client","require","Server","HttpClient","security","passwordDigest","parser","openWSDL","WSDL","open","debug","_wsdlCache","_requestWSDL","url","options","callback","WSDL_CACHE","wsdl","process","nextTick","err","createClient","endpoint","listen","server","pathOrOptions","services","xml","path","uri","exports","BasicAuthSecurity","WSSecurity","WSSecurityCert","ClientSSLSecurity","ClientSSLSecurityPFX","BearerSecurity","XMLHandler","NamespaceContext","QName"],"sources":["../src/soap.js"],"sourcesContent":["// Copyright IBM Corp. 2016,2018. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n\"use strict\";\n\nvar Client = require('./client'),\n  Server = require('./server'),\n  HttpClient = require('./http'),\n  security = require('./security'),\n  passwordDigest = require('./utils').passwordDigest,\n  parser = require('./parser/index'),\n  openWSDL = parser.WSDL.open,\n  debug = require('debug')('strong-soap:soap');\n\nvar _wsdlCache = {};\n\nfunction _requestWSDL(url, options, callback) {\n  if (typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  _wsdlCache = options.WSDL_CACHE || _wsdlCache;\n\n  var wsdl = _wsdlCache[url];\n  if (wsdl) {\n    debug('_requestWSDL, wsdl in cache %s', wsdl);\n    process.nextTick(function() {\n      callback(null, wsdl);\n    });\n  }\n  else {\n    openWSDL(url, options, function(err, wsdl) {\n      if (err) {\n        return callback(err);\n      } else {\n        _wsdlCache[url] = wsdl;\n      }\n      callback(null, wsdl);\n    });\n  }\n}\n\nfunction createClient(url, options, callback, endpoint) {\n  if (typeof options === 'function') {\n    endpoint = callback;\n    callback = options;\n    options = {};\n  }\n  endpoint = options.endpoint || endpoint;\n  debug('createClient params: wsdl url: %s client options: %j', url, options);\n  _requestWSDL(url, options, function(err, wsdl) {\n    callback(err, wsdl && new Client(wsdl, endpoint, options));\n  });\n}\n\nfunction listen(server, pathOrOptions, services, xml) {\n  debug('listen params: pathOrOptions: %j services: %j xml: %j', pathOrOptions, services, xml);\n  var options = {},\n    path = pathOrOptions,\n    uri = null;\n\n  if (typeof pathOrOptions === 'object') {\n    options = pathOrOptions;\n    path = options.path;\n    services = options.services;\n    xml = options.xml;\n    uri = options.uri;\n  }\n\n  var wsdl = new parser.WSDL(xml || services, uri, options);\n  return new Server(server, path, services, wsdl, options);\n}\n\nexports.security = security;\nexports.BasicAuthSecurity = security.BasicAuthSecurity;\nexports.WSSecurity = security.WSSecurity;\nexports.WSSecurityCert = security.WSSecurityCert;\nexports.ClientSSLSecurity = security.ClientSSLSecurity;\nexports.ClientSSLSecurityPFX = security.ClientSSLSecurityPFX;\nexports.BearerSecurity = security.BearerSecurity;\nexports.createClient = createClient;\nexports.passwordDigest = passwordDigest;\nexports.listen = listen;\nexports.WSDL = parser.WSDL;\nexports.XMLHandler = parser.XMLHandler;\nexports.NamespaceContext = parser.NamespaceContext;\nexports.QName = parser.QName;\n\n// Export Client and Server to allow customization\nexports.Server = Server;\nexports.Client = Client;\nexports.HttpClient = HttpClient;\n"],"mappings":"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","ignoreList":[]}