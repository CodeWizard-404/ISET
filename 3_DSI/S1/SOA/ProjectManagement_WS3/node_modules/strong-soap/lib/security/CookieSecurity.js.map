{"version":3,"file":"CookieSecurity.js","names":["Security","require","hasCookieHeader","cookie","hasOwnProperty","CookieSecurity","constructor","options","Array","isArray","map","c","split","join","addHttpHeaders","headers","Cookie","module","exports"],"sources":["../../src/security/CookieSecurity.js"],"sourcesContent":["// Copyright IBM Corp. 2016. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar Security = require('./security');\n\nfunction hasCookieHeader (cookie) {\n  return typeof cookie === 'object' && cookie.hasOwnProperty('set-cookie');\n}\n\n/*\n * Accepts either a cookie or lastResponseHeaders\n */\nclass CookieSecurity extends Security {\n  constructor(cookie, options) {\n    super(options);\n\n    cookie = hasCookieHeader(cookie) ? cookie['set-cookie'] : cookie;\n\n    this.cookie = (Array.isArray(cookie) ? cookie : [cookie])\n      .map(c => c.split(';')[0])\n      .join('; ');\n  }\n\n  addHttpHeaders(headers) {\n    headers.Cookie = this.cookie;\n  }\n}\n\nmodule.exports = CookieSecurity;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,QAAQ,GAAGC,OAAO,CAAC,YAAY,CAAC;AAEpC,SAASC,eAAeA,CAAEC,MAAM,EAAE;EAChC,OAAO,OAAOA,MAAM,KAAK,QAAQ,IAAIA,MAAM,CAACC,cAAc,CAAC,YAAY,CAAC;AAC1E;;AAEA;AACA;AACA;AACA,MAAMC,cAAc,SAASL,QAAQ,CAAC;EACpCM,WAAWA,CAACH,MAAM,EAAEI,OAAO,EAAE;IAC3B,KAAK,CAACA,OAAO,CAAC;IAEdJ,MAAM,GAAGD,eAAe,CAACC,MAAM,CAAC,GAAGA,MAAM,CAAC,YAAY,CAAC,GAAGA,MAAM;IAEhE,IAAI,CAACA,MAAM,GAAG,CAACK,KAAK,CAACC,OAAO,CAACN,MAAM,CAAC,GAAGA,MAAM,GAAG,CAACA,MAAM,CAAC,EACrDO,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CACzBC,IAAI,CAAC,IAAI,CAAC;EACf;EAEAC,cAAcA,CAACC,OAAO,EAAE;IACtBA,OAAO,CAACC,MAAM,GAAG,IAAI,CAACb,MAAM;EAC9B;AACF;AAEAc,MAAM,CAACC,OAAO,GAAGb,cAAc","ignoreList":[]}