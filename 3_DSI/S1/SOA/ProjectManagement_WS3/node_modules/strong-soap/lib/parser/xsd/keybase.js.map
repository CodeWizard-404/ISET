{"version":3,"file":"keybase.js","names":["g","require","XSDElement","KeyBase","constructor","nsName","attrs","options","selector","fields","addChild","child","name","warn","$name","$xpath","push","postProcess","definitions","length","allowedChildren","module","exports"],"sources":["../../../src/parser/xsd/keybase.js"],"sourcesContent":["// Copyright IBM Corp. 2016,2017. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar g = require('../../globalize');\nvar XSDElement = require('./xsdElement');\n\nclass KeyBase extends XSDElement {\n  constructor(nsName, attrs, options) {\n    super(nsName, attrs, options);\n    this.selector = null;\n    this.fields = [];\n  }\n\n  addChild(child) {\n    if (child.name === 'selector') {\n      if (this.selector) {\n        g.warn(\n          'The key element %s %s MUST contain one and only one selector element',\n          this.nsName, this.$name);\n      }\n      this.selector = child.$xpath;\n    } else if (child.name === 'field') {\n      this.fields.push(child.$xpath);\n    }\n  }\n\n  postProcess(definitions) {\n    if (!this.selector) {\n      g.warn(\n        'The key element %s %s MUST contain one and only one selector element',\n        this.nsName, this.$name);\n    }\n    if (!this.fields.length) {\n      g.warn(\n        'The key element %s %s MUST contain one or more field elements',\n        this.nsName, this.$name);\n    }\n  }\n}\n\nKeyBase.allowedChildren = ['annotation', 'selector', 'field'];\n\nmodule.exports = KeyBase;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,CAAC,GAAGC,OAAO,CAAC,iBAAiB,CAAC;AAClC,IAAIC,UAAU,GAAGD,OAAO,CAAC,cAAc,CAAC;AAExC,MAAME,OAAO,SAASD,UAAU,CAAC;EAC/BE,WAAWA,CAACC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAE;IAClC,KAAK,CAACF,MAAM,EAAEC,KAAK,EAAEC,OAAO,CAAC;IAC7B,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,MAAM,GAAG,EAAE;EAClB;EAEAC,QAAQA,CAACC,KAAK,EAAE;IACd,IAAIA,KAAK,CAACC,IAAI,KAAK,UAAU,EAAE;MAC7B,IAAI,IAAI,CAACJ,QAAQ,EAAE;QACjBR,CAAC,CAACa,IAAI,CACJ,sEAAsE,EACtE,IAAI,CAACR,MAAM,EAAE,IAAI,CAACS,KAAK,CAAC;MAC5B;MACA,IAAI,CAACN,QAAQ,GAAGG,KAAK,CAACI,MAAM;IAC9B,CAAC,MAAM,IAAIJ,KAAK,CAACC,IAAI,KAAK,OAAO,EAAE;MACjC,IAAI,CAACH,MAAM,CAACO,IAAI,CAACL,KAAK,CAACI,MAAM,CAAC;IAChC;EACF;EAEAE,WAAWA,CAACC,WAAW,EAAE;IACvB,IAAI,CAAC,IAAI,CAACV,QAAQ,EAAE;MAClBR,CAAC,CAACa,IAAI,CACJ,sEAAsE,EACtE,IAAI,CAACR,MAAM,EAAE,IAAI,CAACS,KAAK,CAAC;IAC5B;IACA,IAAI,CAAC,IAAI,CAACL,MAAM,CAACU,MAAM,EAAE;MACvBnB,CAAC,CAACa,IAAI,CACJ,+DAA+D,EAC/D,IAAI,CAACR,MAAM,EAAE,IAAI,CAACS,KAAK,CAAC;IAC5B;EACF;AACF;AAEAX,OAAO,CAACiB,eAAe,GAAG,CAAC,YAAY,EAAE,UAAU,EAAE,OAAO,CAAC;AAE7DC,MAAM,CAACC,OAAO,GAAGnB,OAAO","ignoreList":[]}