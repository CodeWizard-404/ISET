{"version":3,"file":"service.js","names":["WSDLElement","require","QName","Service","constructor","nsName","attrs","options","ports","postProcess","definitions","children","bindings","length","i","child","name","bindingName","parse","$binding","binding","$name","location","splice","err","describe","descriptor","port","elementName","allowedChildren","module","exports"],"sources":["../../../src/parser/wsdl/service.js"],"sourcesContent":["// Copyright IBM Corp. 2016,2018. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar WSDLElement = require('./wsdlElement');\nvar QName = require('../qname');\n\nclass Service extends WSDLElement {\n  constructor(nsName, attrs, options) {\n    super(nsName, attrs, options);\n    this.ports = {};\n  }\n\n  postProcess(definitions) {\n    try {\n      var children = this.children,\n        bindings = definitions.bindings;\n      if (children && children.length > 0) {\n        for (var i = 0, child; child = children[i]; i++) {\n          if (child.name !== 'port')\n            continue;\n          var bindingName = QName.parse(child.$binding).name;\n          var binding = bindings[bindingName];\n          if (binding) {\n            binding.postProcess(definitions);\n            this.ports[child.$name] = {\n              location: child.location,\n              binding: binding\n            };\n            children.splice(i--, 1);\n          }\n        }\n      }\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  describe(definitions) {\n    if (this.descriptor) return this.descriptor;\n    var ports = {};\n    for (var name in this.ports) {\n      var port = this.ports[name];\n      ports[name] = port.binding.describe(definitions);\n    }\n    this.descriptor = ports;\n    return this.descriptor;\n  }\n\n}\n\nService.elementName = 'service';\nService.allowedChildren = ['port', 'documentation'];\n\nmodule.exports = Service;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,WAAW,GAAGC,OAAO,CAAC,eAAe,CAAC;AAC1C,IAAIC,KAAK,GAAGD,OAAO,CAAC,UAAU,CAAC;AAE/B,MAAME,OAAO,SAASH,WAAW,CAAC;EAChCI,WAAWA,CAACC,MAAM,EAAEC,KAAK,EAAEC,OAAO,EAAE;IAClC,KAAK,CAACF,MAAM,EAAEC,KAAK,EAAEC,OAAO,CAAC;IAC7B,IAAI,CAACC,KAAK,GAAG,CAAC,CAAC;EACjB;EAEAC,WAAWA,CAACC,WAAW,EAAE;IACvB,IAAI;MACF,IAAIC,QAAQ,GAAG,IAAI,CAACA,QAAQ;QAC1BC,QAAQ,GAAGF,WAAW,CAACE,QAAQ;MACjC,IAAID,QAAQ,IAAIA,QAAQ,CAACE,MAAM,GAAG,CAAC,EAAE;QACnC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEC,KAAK,EAAEA,KAAK,GAAGJ,QAAQ,CAACG,CAAC,CAAC,EAAEA,CAAC,EAAE,EAAE;UAC/C,IAAIC,KAAK,CAACC,IAAI,KAAK,MAAM,EACvB;UACF,IAAIC,WAAW,GAAGf,KAAK,CAACgB,KAAK,CAACH,KAAK,CAACI,QAAQ,CAAC,CAACH,IAAI;UAClD,IAAII,OAAO,GAAGR,QAAQ,CAACK,WAAW,CAAC;UACnC,IAAIG,OAAO,EAAE;YACXA,OAAO,CAACX,WAAW,CAACC,WAAW,CAAC;YAChC,IAAI,CAACF,KAAK,CAACO,KAAK,CAACM,KAAK,CAAC,GAAG;cACxBC,QAAQ,EAAEP,KAAK,CAACO,QAAQ;cACxBF,OAAO,EAAEA;YACX,CAAC;YACDT,QAAQ,CAACY,MAAM,CAACT,CAAC,EAAE,EAAE,CAAC,CAAC;UACzB;QACF;MACF;IACF,CAAC,CAAC,OAAOU,GAAG,EAAE;MACZ,MAAMA,GAAG;IACX;EACF;EAEAC,QAAQA,CAACf,WAAW,EAAE;IACpB,IAAI,IAAI,CAACgB,UAAU,EAAE,OAAO,IAAI,CAACA,UAAU;IAC3C,IAAIlB,KAAK,GAAG,CAAC,CAAC;IACd,KAAK,IAAIQ,IAAI,IAAI,IAAI,CAACR,KAAK,EAAE;MAC3B,IAAImB,IAAI,GAAG,IAAI,CAACnB,KAAK,CAACQ,IAAI,CAAC;MAC3BR,KAAK,CAACQ,IAAI,CAAC,GAAGW,IAAI,CAACP,OAAO,CAACK,QAAQ,CAACf,WAAW,CAAC;IAClD;IACA,IAAI,CAACgB,UAAU,GAAGlB,KAAK;IACvB,OAAO,IAAI,CAACkB,UAAU;EACxB;AAEF;AAEAvB,OAAO,CAACyB,WAAW,GAAG,SAAS;AAC/BzB,OAAO,CAAC0B,eAAe,GAAG,CAAC,MAAM,EAAE,eAAe,CAAC;AAEnDC,MAAM,CAACC,OAAO,GAAG5B,OAAO","ignoreList":[]}