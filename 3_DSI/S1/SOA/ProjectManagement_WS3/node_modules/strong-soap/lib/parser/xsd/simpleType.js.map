{"version":3,"file":"simpleType.js","names":["XSDElement","require","descriptor","helper","xsd","SimpleType","constructor","nsName","attrs","options","addChild","child","name","describe","definitions","TypeDescriptor","$name","xmlns","nsURI","isSimple","postProcess","type","undefined","String","targetNamespace","namespaces","getBuiltinType","jsType","restriction","base","list","itemType","union","memberTypes","forEach","t","push","elementName","allowedChildren","module","exports"],"sources":["../../../src/parser/xsd/simpleType.js"],"sourcesContent":["// Copyright IBM Corp. 2016,2017. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar XSDElement = require('./xsdElement');\nvar descriptor = require('./descriptor');\nvar helper = require('../helper');\nvar xsd = require('../xsd');\n\nclass SimpleType extends XSDElement {\n  constructor(nsName, attrs, options) {\n    super(nsName, attrs, options);\n  }\n\n  addChild(child) {\n    this[child.name] = child;\n  }\n\n  describe(definitions) {\n    var descriptor = this.descriptor = new XSDElement.TypeDescriptor();\n    descriptor.name = this.$name || this.name;\n    descriptor.xmlns = this.nsURI;\n    descriptor.isSimple = true;\n    return descriptor;\n  }\n\n  postProcess(definitions) {\n    if (this.type !== undefined) return;\n    this.type = String; // Default to String\n    if (this.targetNamespace === helper.namespaces.xsd) {\n      this.type = xsd.getBuiltinType(this.$name).jsType;\n      return;\n    }\n    if (this.restriction) {\n      this.restriction.postProcess(definitions);\n      if (this.restriction.base) {\n        // Use the restriction base for more information on the xs:type\n        this.type = this.restriction.base;\n      }\n    } else if (this.list) {\n      this.list.postProcess(definitions);\n      if (this.list.itemType) {\n        this.list.itemType.postProcess(definitions);\n        this.type = [this.list.itemType.type];\n      }\n    } else if (this.union) {\n      let memberTypes = [];\n      memberTypes.union = true; // Set the union flag to true\n      this.union.postProcess(definitions);\n      if (this.union.memberTypes) {\n        this.union.memberTypes.forEach(function(t) {\n          t.postProcess(definitions);\n          memberTypes.push(t.type);\n        });\n        this.type = memberTypes;\n      }\n    }\n  }\n}\n\nSimpleType.elementName = 'simpleType';\nSimpleType.allowedChildren = ['annotation', 'list', 'union', 'restriction'];\n\nmodule.exports = SimpleType;\n"],"mappings":"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","ignoreList":[]}