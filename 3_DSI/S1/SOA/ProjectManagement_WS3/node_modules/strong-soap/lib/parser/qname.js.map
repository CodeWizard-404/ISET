{"version":3,"file":"qname.js","names":["g","require","assert","qnameExp","QName","constructor","nsURI","name","prefix","arguments","length","equal","qname","exec","Error","f","parts","split","toString","str","parse","result","uri","getNamespaceURI","module","exports"],"sources":["../../src/parser/qname.js"],"sourcesContent":["// Copyright IBM Corp. 2016,2017. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\nvar g = require('../globalize');\nvar assert = require('assert');\nvar qnameExp = /^(?:\\{([^\\{\\}]*)\\})?(?:([^\\{\\}]+):)?([^\\{\\}\\:]+)$/;\n\nclass QName {\n  /**\n   * Create a new QName\n   * - new QName(name)\n   * - new QName(nsURI, name)\n   * - new QName(nsURI, name, prefix)\n   *\n   * @param {string} nsURI Namespace URI\n   * @param {string} name Local name\n   * @param {string} prefix Namespace prefix\n   */\n  constructor(nsURI, name, prefix) {\n    if (arguments.length === 1) {\n      assert.equal(typeof nsURI, 'string',\n        'The qname must be string in form of {nsURI}prefix:name');\n      let qname;\n      if (qname = qnameExp.exec(nsURI)) {\n        this.nsURI = qname[1] || '';\n        this.prefix = qname[2] || '';\n        this.name = qname[3] || '';\n      } else {\n        throw new Error(g.f('Invalid qname: %s', nsURI));\n      }\n    } else {\n      this.nsURI = nsURI || '';\n      this.name = name || '';\n      if (!prefix) {\n        let parts = this.name.split(':');\n        this.name = parts[0];\n        this.prefix = parts[1];\n      } else {\n        this.prefix = prefix || '';\n      }\n    }\n  }\n\n  /**\n   * {nsURI}prefix:name\n   * @returns {string}\n   */\n  toString() {\n    var str = '';\n    if (this.nsURI) {\n      str = '{' + this.nsURI + '}';\n    }\n    if (this.prefix) {\n      str += this.prefix + ':';\n    }\n    str += this.name;\n    return str;\n  }\n\n  /**\n   * Parse a qualified name (prefix:name)\n   * @param {string} qname Qualified name\n   * @param {string|NamespaceContext} nsURI\n   * @returns {QName}\n   */\n  static parse(qname, nsURI) {\n    qname = qname || '';\n    var result = new QName(qname);\n    var uri;\n    if (nsURI == null) {\n      uri = '';\n    } else if (typeof nsURI === 'string') {\n      uri = nsURI;\n    } else if (typeof nsURI.getNamespaceURI === 'function') {\n      uri = nsURI.getNamespaceURI(result.prefix);\n    } else {\n      uri = '';\n    }\n    if (uri) {\n      result.nsURI = uri;\n    }\n    return result;\n  }\n}\n\nmodule.exports = QName;\n\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,CAAC,GAAGC,OAAO,CAAC,cAAc,CAAC;AAC/B,IAAIC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAC9B,IAAIE,QAAQ,GAAG,mDAAmD;AAElE,MAAMC,KAAK,CAAC;EACV;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,WAAWA,CAACC,KAAK,EAAEC,IAAI,EAAEC,MAAM,EAAE;IAC/B,IAAIC,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;MAC1BR,MAAM,CAACS,KAAK,CAAC,OAAOL,KAAK,EAAE,QAAQ,EACjC,wDAAwD,CAAC;MAC3D,IAAIM,KAAK;MACT,IAAIA,KAAK,GAAGT,QAAQ,CAACU,IAAI,CAACP,KAAK,CAAC,EAAE;QAChC,IAAI,CAACA,KAAK,GAAGM,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE;QAC3B,IAAI,CAACJ,MAAM,GAAGI,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE;QAC5B,IAAI,CAACL,IAAI,GAAGK,KAAK,CAAC,CAAC,CAAC,IAAI,EAAE;MAC5B,CAAC,MAAM;QACL,MAAM,IAAIE,KAAK,CAACd,CAAC,CAACe,CAAC,CAAC,mBAAmB,EAAET,KAAK,CAAC,CAAC;MAClD;IACF,CAAC,MAAM;MACL,IAAI,CAACA,KAAK,GAAGA,KAAK,IAAI,EAAE;MACxB,IAAI,CAACC,IAAI,GAAGA,IAAI,IAAI,EAAE;MACtB,IAAI,CAACC,MAAM,EAAE;QACX,IAAIQ,KAAK,GAAG,IAAI,CAACT,IAAI,CAACU,KAAK,CAAC,GAAG,CAAC;QAChC,IAAI,CAACV,IAAI,GAAGS,KAAK,CAAC,CAAC,CAAC;QACpB,IAAI,CAACR,MAAM,GAAGQ,KAAK,CAAC,CAAC,CAAC;MACxB,CAAC,MAAM;QACL,IAAI,CAACR,MAAM,GAAGA,MAAM,IAAI,EAAE;MAC5B;IACF;EACF;;EAEA;AACF;AACA;AACA;EACEU,QAAQA,CAAA,EAAG;IACT,IAAIC,GAAG,GAAG,EAAE;IACZ,IAAI,IAAI,CAACb,KAAK,EAAE;MACda,GAAG,GAAG,GAAG,GAAG,IAAI,CAACb,KAAK,GAAG,GAAG;IAC9B;IACA,IAAI,IAAI,CAACE,MAAM,EAAE;MACfW,GAAG,IAAI,IAAI,CAACX,MAAM,GAAG,GAAG;IAC1B;IACAW,GAAG,IAAI,IAAI,CAACZ,IAAI;IAChB,OAAOY,GAAG;EACZ;;EAEA;AACF;AACA;AACA;AACA;AACA;EACE,OAAOC,KAAKA,CAACR,KAAK,EAAEN,KAAK,EAAE;IACzBM,KAAK,GAAGA,KAAK,IAAI,EAAE;IACnB,IAAIS,MAAM,GAAG,IAAIjB,KAAK,CAACQ,KAAK,CAAC;IAC7B,IAAIU,GAAG;IACP,IAAIhB,KAAK,IAAI,IAAI,EAAE;MACjBgB,GAAG,GAAG,EAAE;IACV,CAAC,MAAM,IAAI,OAAOhB,KAAK,KAAK,QAAQ,EAAE;MACpCgB,GAAG,GAAGhB,KAAK;IACb,CAAC,MAAM,IAAI,OAAOA,KAAK,CAACiB,eAAe,KAAK,UAAU,EAAE;MACtDD,GAAG,GAAGhB,KAAK,CAACiB,eAAe,CAACF,MAAM,CAACb,MAAM,CAAC;IAC5C,CAAC,MAAM;MACLc,GAAG,GAAG,EAAE;IACV;IACA,IAAIA,GAAG,EAAE;MACPD,MAAM,CAACf,KAAK,GAAGgB,GAAG;IACpB;IACA,OAAOD,MAAM;EACf;AACF;AAEAG,MAAM,CAACC,OAAO,GAAGrB,KAAK","ignoreList":[]}