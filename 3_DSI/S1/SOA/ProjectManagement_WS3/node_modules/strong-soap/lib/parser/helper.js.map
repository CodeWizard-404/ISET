{"version":3,"file":"helper.js","names":["primitiveDataTypes","string","String","boolean","Boolean","decimal","Number","float","double","duration","dateTime","Date","time","date","gYearMonth","gYear","gMonthDay","gDay","gMonth","hexBinary","base64Binary","anyURI","QName","NOTATION","derivedDataTypes","normalizedString","token","language","NMTOKEN","NMTOKENS","Name","NCName","ID","IDREF","IDREFS","ENTITY","ENTITIES","integer","nonPositiveInteger","negativeInteger","long","int","short","byte","nonNegativeInteger","unsignedLong","unsignedInt","unsignedShort","unsignedByte","positiveInteger","schemaTypes","s","namespaces","wsdl","soap","soap12","http","mime","soapenc","soapenv","xsi_rc","xsd_rc","xsd","xsi","xml","xmlEscape","obj","substr","replace","crypto","require","exports","passwordDigest","nonce","created","password","pwHash","createHash","rawNonce","Buffer","from","toString","update","digest","EMPTY_PREFIX","findPrefix","xmlnsMapping","nsURI","n","extend","base","Object","keys","forEach","key","hasOwnProperty","_Set","constructor","set","Set","add","val","Array","isArray","indexOf","push","has"],"sources":["../../src/parser/helper.js"],"sourcesContent":["// Copyright IBM Corp. 2016,2019. All Rights Reserved.\n// Node module: strong-soap\n// This file is licensed under the MIT License.\n// License text available at https://opensource.org/licenses/MIT\n\n'use strict';\n\n// Primitive data types\nvar primitiveDataTypes = {\n  string: String,\n  boolean: Boolean,\n  decimal: Number,\n  float: Number,\n  double: Number,\n  duration: Number,\n  dateTime: Date,\n  time: Date,\n  date: Date,\n  gYearMonth: Number,\n  gYear: Number,\n  gMonthDay: Number,\n  gDay: Number,\n  gMonth: Number,\n  hexBinary: String,\n  base64Binary: String,\n  anyURI: String,\n  QName: String,\n  NOTATION: String\n};\n\n// Derived data types\nvar derivedDataTypes = {\n  normalizedString: String,\n  token: String,\n  language: String,\n  NMTOKEN: String,\n  NMTOKENS: String,\n  Name: String,\n  NCName: String,\n  ID: String,\n  IDREF: String,\n  IDREFS: String,\n  ENTITY: String,\n  ENTITIES: String,\n  integer: Number,\n  nonPositiveInteger: Number,\n  negativeInteger: Number,\n  long: Number,\n  int: Number,\n  short: Number,\n  byte: Number,\n  nonNegativeInteger: Number,\n  unsignedLong: Number,\n  unsignedInt: Number,\n  unsignedShort: Number,\n  unsignedByte: Number,\n  positiveInteger: Number\n};\n\n// Built-in data types\nvar schemaTypes = {};\n\nfor (let s in primitiveDataTypes) {\n  schemaTypes[s] = primitiveDataTypes[s];\n}\nfor (let s in derivedDataTypes) {\n  schemaTypes[s] = derivedDataTypes[s];\n}\n\nvar namespaces = {\n  wsdl: 'http://schemas.xmlsoap.org/wsdl/',\n  soap: 'http://schemas.xmlsoap.org/wsdl/soap/',\n  soap12: 'http://schemas.xmlsoap.org/wsdl/soap12/',\n  http: 'http://schemas.xmlsoap.org/wsdl/http/',\n  mime: 'http://schemas.xmlsoap.org/wsdl/mime/',\n  soapenc: 'http://schemas.xmlsoap.org/soap/encoding/',\n  soapenv: 'http://schemas.xmlsoap.org/soap/envelope/',\n  xsi_rc: 'http://www.w3.org/2000/10/XMLSchema-instance',\n  xsd_rc: 'http://www.w3.org/2000/10/XMLSchema',\n  xsd: 'http://www.w3.org/2001/XMLSchema',\n  xsi: 'http://www.w3.org/2001/XMLSchema-instance',\n  xml: 'http://www.w3.org/XML/1998/namespace'\n};\n\nfunction xmlEscape(obj) {\n  if (typeof obj === 'string') {\n    if (obj.substr(0, 9) === '<![CDATA[' && obj.substr(-3) === \"]]>\") {\n      return obj;\n    }\n    return obj\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;');\n  }\n\n  return obj;\n}\n\nvar crypto = require('crypto');\nexports.passwordDigest = function passwordDigest(nonce, created, password) {\n  // digest = base64 ( sha1 ( nonce + created + password ) )\n  var pwHash = crypto.createHash('sha1');\n  var rawNonce = Buffer.from(nonce || '', 'base64').toString('binary');\n  pwHash.update(rawNonce + created + password);\n  return pwHash.digest('base64');\n};\n\nvar EMPTY_PREFIX = ''; // Prefix for targetNamespace\n\nexports.EMPTY_PREFIX = EMPTY_PREFIX;\n\n/**\n * Find a key from an object based on the value\n * @param {Object} Namespace prefix/uri mapping\n * @param {*} nsURI value\n * @returns {String} The matching key\n */\nexports.findPrefix = function(xmlnsMapping, nsURI) {\n  for (var n in xmlnsMapping) {\n    if (n === EMPTY_PREFIX) continue;\n    if (xmlnsMapping[n] === nsURI)\n      return n;\n  }\n};\n\nexports.extend = function extend(base, obj) {\n  if (base !== null && typeof base === \"object\" &&\n    obj !== null && typeof obj === \"object\") {\n    Object.keys(obj).forEach(function(key) {\n      if (!base.hasOwnProperty(key))\n        base[key] = obj[key];\n    });\n  }\n  return base;\n};\n\nexports.schemaTypes = schemaTypes;\nexports.xmlEscape = xmlEscape;\nexports.namespaces = namespaces;\n\nclass _Set {\n  constructor() {\n    this.set = typeof Set === 'function' ? new Set() : [];\n  }\n\n  add(val) {\n    if (Array.isArray(this.set)) {\n      if (this.set.indexOf(val) === -1) {\n        this.set.push(val);\n      }\n    } else {\n      this.set.add(val);\n    }\n    return this;\n  }\n\n  has(val) {\n    if (Array.isArray(this.set)) {\n      return this.set.indexOf(val) !== -1;\n    } else {\n      return this.set.has(val);\n    }\n  }\n}\n\nexports.Set = _Set;\n\n"],"mappings":"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","ignoreList":[]}